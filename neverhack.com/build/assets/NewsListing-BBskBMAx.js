import{r,j as s,$ as B}from"./client-_4B1iPN4.js";import{d as E,u as M,a as k,T as P}from"./web-ClPTa7N9.js";import{c as D}from"./clsx-B-dksMZM.js";import{u as $,N as F}from"./NavigationBar-CORi_K_r.js";import{g as G}from"./maths-BcBSyK5V.js";import{u as O,S as Q}from"./Video-BVLyszW3.js";import{u as q}from"./hook-CrjBPnp3.js";import{a as z,I as y}from"./ItemCard-ClyqLCDf.js";import{B as H}from"./Button-BpgEktaa.js";const J="_newsListingWrapper_1h70x_23",K="_title_1h70x_44",U="_embla_1h70x_62",V="_newsList_1h70x_23",X="_overlayMobile_1h70x_95",Y="_navigationBar_1h70x_112",Z="_itemContainer_1h70x_117",ee="_lastItemContainer_1h70x_187",i={newsListingWrapper:J,title:K,embla:U,newsList:V,overlayMobile:X,navigationBar:Y,itemContainer:Z,lastItemContainer:ee},ue=({news:h,className:C,withTitle:j=!0})=>{const{t:p}=q(),c=E(),d=r.useRef(null),[w,_]=M(),x=r.useRef(null),b=r.useRef(null),N=r.useRef(null),u=r.useRef(null),g=r.useRef(null),v=z({container:d,rectAnimRef:x,titleRef:b,buttonRef:N}),[S,a]=$({active:!0,breakpoints:{"(min-width: 1024px)":{active:!1}}}),[I,L]=r.useState(0),m=r.useMemo(()=>h.sort((e,t)=>new Date(t.published_at).getTime()-new Date(e.published_at).getTime()),[h]),f=r.useMemo(()=>{const e=[],t=(n,l)=>{[...new Array(n)].forEach((R,o)=>{l.includes(o)||o>=m.length?(e.push(null),o<m.length&&e.push(m[o])):e.push(m[o])})};return typeof window>"u"?[]:((c==="mobile"||c==="tablet")&&window.innerWidth<1024?t(6,[]):c==="desktop"?t(6,[2,3]):t(5,[2,4]),e)},[m,c]),{add:A}=O();r.useEffect(()=>{if((c==="mobile"||c==="tablet")&&window.innerWidth<1024&&a){const e=()=>L(a.selectedScrollSnap());return a.on("select",e),e(),()=>{a.off("select",e)}}},[c,a]);const T=()=>{a&&a.scrollPrev()},W=()=>{a&&a.scrollNext()};return k(()=>{var e,t;if(w.current){(e=u.current)==null||e.kill(),(t=g.current)==null||t.kill(),u.current=G.timeline({paused:!0});let n=0;w.current.forEach((l,R)=>{var o;l&&l.tl&&((o=u.current)==null||o.add(l.tl.play(),R*.05),n+=.05)}),v.current&&u.current.add(v.current.play(),n+.05),g.current=Q.ScrollTrigger.create({trigger:d.current,start:"top 75%",animation:u.current,toggleActions:"play complete none none"})}return()=>{var n,l;(n=u.current)==null||n.kill(),(l=g.current)==null||l.kill()}},[f]),s.jsx("div",{className:D(i.newsListingWrapper,C),children:s.jsxs("div",{className:"container",children:[j&&s.jsx(P,{className:i.title,tag:"h3",children:p("app.sections.newslisting_title")}),s.jsxs("div",{ref:S,className:i.embla,children:[s.jsxs("div",{ref:d,className:i.newsList,children:[f.map((e,t)=>{var n;return e?s.jsx(y,{ref:_(t),animate:!0,item:{title:e.title,tags:[{title:((n=e.category)==null?void 0:n.title)??""}],published_at:e.published_at,href:route("web.news.single",e.slug)},index:t,customStyles:{itemContainer:i.itemContainer}},e.slug+"-"+t):s.jsx(y,{ref:_(t),index:t,customStyles:{itemContainer:i.itemContainer}},"empty-"+t)}),s.jsxs(B,{ref:A("index",0),"data-mouse-only":!0,className:i.lastItemContainer,"data-object":"grid","data-config":"newslistingAll",href:route("web.news.index"),children:[s.jsx("p",{ref:b,children:p("app.ui.all_lastest_news")}),s.jsx(H,{ref:N,text:p("app.ui.see_all"),theme:"primary"}),s.jsx("div",{ref:x,className:"rect-anim"})]})]}),s.jsx("div",{className:i.overlayMobile})]}),f.length>1&&s.jsx(F,{currentIndex:I,itemsLength:f.length+1,className:i.navigationBar,onPrev:T,onNext:W})]})})};export{ue as N};
